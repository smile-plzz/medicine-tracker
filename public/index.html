<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Medicine Tracker - Smart Medication Management</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="manifest" href="manifest.json">
    <meta name="description" content="Smart medication management application with reminders, tracking, and comprehensive features">
    <meta name="keywords" content="medicine, medication, tracker, health, reminders, schedule, healthcare">
    <meta name="author" content="Md. Ismail Hossain">
    <meta name="theme-color" content="#3b82f6">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.23/jspdf.plugin.autotable.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Custom form input styles (plain CSS approximation of Tailwind classes) */
        .form-input,
        .form-textarea {
            margin-top: 0.25rem;
            display: block;
            width: 100%;
            border-radius: 0.5rem;
            border: 1px solid #d1d5db; /* gray-300 */
            background: #ffffff;
            font-size: 0.875rem; /* sm */
            line-height: 1.25rem;
            padding: 0.5rem 0.75rem;
            transition: box-shadow 0.2s ease, border-color 0.2s ease, background-color 0.2s ease;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
        }
        .form-input:focus,
        .form-textarea:focus {
            outline: none;
            border-color: #3b82f6; /* blue-500 */
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3);
        }

        /* Custom button styles */
        .btn-base {
            display: inline-flex;
            justify-content: center;
            align-items: center;
            border-radius: 0.5rem;
            border: 1px solid transparent;
            padding: 0.5rem 1rem;
            font-size: 0.875rem;
            font-weight: 500;
            transition: background-color 0.2s ease, box-shadow 0.2s ease, transform 0.1s ease;
            cursor: pointer;
        }
        .btn-primary {
            composes: btn-base;
            background-image: linear-gradient(to right, #2563eb, #1d4ed8);
            color: #ffffff;
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }
        .btn-primary:hover { background-image: linear-gradient(to right, #1d4ed8, #1e40af); }
        .btn-primary:focus { box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.5); outline: none; }

        .btn-secondary {
            composes: btn-base;
            background: #ffffff;
            color: #374151; /* gray-700 */
            border-color: #d1d5db; /* gray-300 */
            box-shadow: 0 1px 2px rgba(0,0,0,0.05);
        }
        .btn-secondary:hover { background: #f9fafb; }
        .btn-secondary:focus { box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3); outline: none; }

        .btn-success {
            composes: btn-base;
            background-image: linear-gradient(to right, #16a34a, #15803d);
            color: #ffffff;
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }
        .btn-success:hover { background-image: linear-gradient(to right, #15803d, #166534); }

        .btn-danger {
            composes: btn-base;
            background-image: linear-gradient(to right, #dc2626, #b91c1c);
            color: #ffffff;
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }
        .btn-danger:hover { background-image: linear-gradient(to right, #b91c1c, #991b1b); }

        /* Print styles */
        @media print {
            .no-print {
                display: none !important;
            }
            body {
                background-color: #fff !important;
            }
            .container {
                width: 100% !important;
                margin: 0 !important;
                padding: 0 !important;
            }
            table {
                width: 100% !important;
            }
            th, td {
                border: 1px solid #000 !important;
                padding: 8px !important;
            }
        }

        /* Validation styles */
        .form-input.invalid,
        .form-textarea.invalid {
            border-color: #ef4444; /* red-500 */
            box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.3);
        }
        .error-message {
            color: #dc2626; /* red-600 */
            font-size: 0.875rem;
            margin-top: 0.25rem;
        }

        /* Loading indicator styles */
        .loading-indicator {
            display: inline-block;
            width: 1rem; /* h-4 */
            height: 1rem; /* w-4 */
            border-radius: 9999px;
            border: 2px solid rgba(17, 24, 39, 0.25); /* gray-900 at 25% */
            border-top-color: #111827; /* gray-900 */
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Notification styles */
        .notification {
            position: fixed;
            top: 1rem;
            right: 1rem;
            z-index: 50;
            padding: 1rem;
            border-radius: 0.5rem;
            box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -2px rgba(0,0,0,0.05);
            transform: translateZ(0);
            transition: all 0.3s ease;
            color: #ffffff;
        }
        .notification.success { background: #22c55e; }
        .notification.error { background: #ef4444; }
        .notification.info { background: #3b82f6; }

        /* Card hover effects */
        .card-hover { transition: all 0.3s ease; }
        .card-hover:hover { box-shadow: 0 20px 25px -5px rgba(0,0,0,0.1), 0 8px 10px -6px rgba(0,0,0,0.1); transform: translateY(-4px); }

        /* Responsive Table Styles */
        @media (max-width: 640px) {
            table, thead, tbody, th, td, tr {
                display: block;
            }

            thead tr {
                position: absolute;
                top: -9999px;
                left: -9999px;
            }

            tr {
                border: 1px solid #e2e8f0;
                margin-bottom: 0.75rem;
                border-radius: 0.5rem;
                overflow: hidden;
            }

            td {
                border: none;
                position: relative;
                padding-left: 50%;
                text-align: left;
                padding-top: 0.5rem;
                padding-bottom: 0.5rem;
            }

            td:before {
                position: absolute;
                top: 0.5rem;
                left: 0.5rem;
                width: 45%;
                padding-right: 0.5rem;
                white-space: nowrap;
                font-weight: bold;
                content: attr(data-label);
            }

            td:last-child {
                text-align: center;
                padding-left: 0.5rem;
            }
        }

        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f5f9;
        }

        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }

        /* Animation classes */
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .slide-in {
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from { transform: translateX(-100%); }
            to { transform: translateX(0); }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 font-sans antialiased min-h-screen">
    <!-- Notification Container -->
    <div id="notification-container"></div>

    <!-- Header with improved design -->
    <header class="bg-white shadow-lg border-b border-gray-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center py-6">
                <div class="flex items-center space-x-4">
                    <div class="flex-shrink-0">
                        <i class="fas fa-pills text-3xl text-blue-600"></i>
                    </div>
                    <div>
                        <h1 class="text-2xl font-bold text-gray-900">Medicine Tracker</h1>
                        <p class="text-sm text-gray-600">Smart medication management</p>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <button id="info-button" class="btn-secondary">
                        <i class="fas fa-info-circle mr-2"></i>Info
                    </button>
                    <button id="settings-button" class="btn-secondary">
                        <i class="fas fa-cog mr-2"></i>Settings
                    </button>
                </div>
            </div>
        </div>
    </header>

    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Stats Dashboard -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8 no-print">
            <div class="bg-white rounded-xl shadow-md p-6 card-hover">
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                        <i class="fas fa-pills text-2xl text-blue-600"></i>
                    </div>
                    <div class="ml-4">
                        <p class="text-sm font-medium text-gray-600">Total Medicines</p>
                        <p id="total-medicines" class="text-2xl font-bold text-gray-900">0</p>
                    </div>
                </div>
            </div>
            <div class="bg-white rounded-xl shadow-md p-6 card-hover">
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                        <i class="fas fa-clock text-2xl text-green-600"></i>
                    </div>
                    <div class="ml-4">
                        <p class="text-sm font-medium text-gray-600">Today's Doses</p>
                        <p id="today-doses" class="text-2xl font-bold text-gray-900">0</p>
                    </div>
                </div>
            </div>
            <div class="bg-white rounded-xl shadow-md p-6 card-hover">
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                        <i class="fas fa-check-circle text-2xl text-purple-600"></i>
                    </div>
                    <div class="ml-4">
                        <p class="text-sm font-medium text-gray-600">Adherence Rate</p>
                        <p id="adherence-rate" class="text-2xl font-bold text-gray-900">0%</p>
                    </div>
                </div>
            </div>
            <div class="bg-white rounded-xl shadow-md p-6 card-hover">
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                        <i class="fas fa-calendar-alt text-2xl text-orange-600"></i>
                    </div>
                    <div class="ml-4">
                        <p class="text-sm font-medium text-gray-600">Next Dose</p>
                        <p id="next-dose" class="text-lg font-bold text-gray-900">--:--</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- Left Column: Patient Info & Add Medicine -->
            <div class="lg:col-span-1 space-y-6">
                <!-- Patient Information Section -->
                <section class="bg-white rounded-xl shadow-lg p-6 no-print card-hover" aria-labelledby="patient-info-heading">
                    <h2 id="patient-info-heading" class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                        <i class="fas fa-user mr-2 text-blue-600"></i>Patient Information
                    </h2>
                    <div class="space-y-4">
                        <div>
                            <label for="patient-name" class="block text-sm font-medium text-gray-700 mb-1">Patient Name</label>
                            <input type="text" id="patient-name" class="form-input" placeholder="Enter patient's name">
                        </div>
                        <div>
                            <label for="patient-dob" class="block text-sm font-medium text-gray-700 mb-1">Date of Birth</label>
                            <input type="date" id="patient-dob" class="form-input">
                        </div>
                        <div>
                            <label for="patient-contact" class="block text-sm font-medium text-gray-700 mb-1">Contact Number</label>
                            <input type="tel" id="patient-contact" class="form-input" placeholder="e.g., 123-456-7890">
                        </div>
                        <div>
                            <label for="patient-allergies" class="block text-sm font-medium text-gray-700 mb-1">Allergies</label>
                            <textarea id="patient-allergies" class="form-textarea" rows="2" placeholder="e.g., Penicillin, Peanuts"></textarea>
                        </div>
                    </div>
                </section>

                <!-- Doctor Information Section -->
                <section class="bg-white rounded-xl shadow-lg p-6 no-print card-hover" aria-labelledby="doctor-info-heading">
                    <h2 id="doctor-info-heading" class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                        <i class="fas fa-user-md mr-2 text-green-600"></i>Doctor Information
                    </h2>
                    <div class="space-y-4">
                        <div>
                            <label for="doctor-name" class="block text-sm font-medium text-gray-700 mb-1">Doctor's Name</label>
                            <input type="text" id="doctor-name" class="form-input" placeholder="Enter doctor's name">
                        </div>
                        <div>
                            <label for="doctor-contact" class="block text-sm font-medium text-gray-700 mb-1">Doctor's Contact</label>
                            <input type="tel" id="doctor-contact" class="form-input" placeholder="e.g., 123-456-7890">
                        </div>
                    </div>
                </section>

                <!-- Add Medicine Section -->
                <section class="bg-white rounded-xl shadow-lg p-6 no-print card-hover" aria-labelledby="add-medicine-heading">
                    <h2 id="add-medicine-heading" class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                        <i class="fas fa-plus-circle mr-2 text-purple-600"></i>Add Medicine
                    </h2>
                    <form id="medicine-form" class="space-y-4">
                        <div>
                            <label for="medicine-name" class="block text-sm font-medium text-gray-700 mb-1">Medicine Name</label>
                            <div class="relative">
                                <input type="text" id="medicine-name" class="form-input" required placeholder="Start typing medicine name...">
                                <div id="autocomplete-suggestions" class="absolute z-10 w-full bg-white border border-gray-200 rounded-md shadow-lg mt-1 max-h-48 overflow-y-auto" style="display: none;"></div>
                            </div>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Time(s)</label>
                            <div id="time-inputs" class="space-y-2">
                                <div class="flex items-center">
                                    <input type="time" class="form-input flex-1" name="medicine-time" required>
                                    <button type="button" class="ml-2 text-red-500 hover:text-red-700 text-xl" aria-label="Remove time input" onclick="removeTimeInput(this)">&times;</button>
                                </div>
                            </div>
                            <button type="button" id="add-time-btn" class="mt-2 btn-secondary text-sm">
                                <i class="fas fa-plus mr-1"></i>Add another time
                            </button>
                        </div>

                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label for="medicine-duration" class="block text-sm font-medium text-gray-700 mb-1">Duration (days)</label>
                                <input type="number" id="medicine-duration" class="form-input" placeholder="Indefinite">
                            </div>
                            <div>
                                <label for="medicine-dosage" class="block text-sm font-medium text-gray-700 mb-1">Dosage</label>
                                <input type="text" id="medicine-dosage" class="form-input" placeholder="e.g., 1 pill, 5ml">
                            </div>
                        </div>

                        <div>
                            <label for="medicine-instructions" class="block text-sm font-medium text-gray-700 mb-1">Instructions</label>
                            <input type="text" id="medicine-instructions" class="form-input" placeholder="e.g., with food, before bed">
                        </div>

                        <div>
                            <label for="medicine-reminder" class="block text-sm font-medium text-gray-700 mb-1">Reminder</label>
                            <select id="medicine-reminder" class="form-input">
                                <option value="5">5 minutes before</option>
                                <option value="10">10 minutes before</option>
                                <option value="15">15 minutes before</option>
                                <option value="30">30 minutes before</option>
                                <option value="0">No reminder</option>
                            </select>
                        </div>

                        <button type="submit" id="add-medicine-submit-button" class="btn-primary w-full">
                            <i class="fas fa-plus mr-2"></i>Add Medicine
                        </button>
                        
                        <div id="success-message" class="hidden mt-4 p-3 bg-green-100 text-green-700 rounded-lg text-center" role="alert">
                            <i class="fas fa-check-circle mr-2"></i>Medicine added successfully!
                        </div>
                    </form>
                </section>
            </div>

            <!-- Right Column: Schedule Display -->
            <div class="lg:col-span-2">
                <section class="bg-white rounded-xl shadow-lg p-6 card-hover" aria-labelledby="schedule-heading">
                    <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6">
                        <h2 id="schedule-heading" class="text-xl font-bold text-gray-800 flex items-center">
                            <i class="fas fa-calendar-check mr-2 text-indigo-600"></i>Medication Schedule
                        </h2>
                        <div class="flex flex-wrap gap-2 mt-4 sm:mt-0">
                            <div class="relative">
                                <input type="text" id="search-medicine" class="form-input pl-10 pr-4" placeholder="Search medicines...">
                                <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                            </div>
                            <select id="filter-time" class="form-input">
                                <option value="">All times</option>
                                <option value="morning">Morning</option>
                                <option value="afternoon">Afternoon</option>
                                <option value="evening">Evening</option>
                                <option value="night">Night</option>
                            </select>
                            <button id="download-pdf" class="btn-success">
                                <i class="fas fa-download mr-2"></i>PDF
                            </button>
                            <button id="export-data" class="btn-secondary">
                                <i class="fas fa-file-export mr-2"></i>Export
                            </button>
                            <button id="reset-schedule" class="btn-danger">
                                <i class="fas fa-trash mr-2"></i>Reset
                            </button>
                        </div>
                    </div>

                    <div class="overflow-x-auto">
                        <table id="schedule-table" class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Time</th>
                                    <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Medicine</th>
                                    <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Dosage</th>
                                    <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Instructions</th>
                                    <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                                    <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200">
                                <!-- Schedule rows will be inserted here -->
                            </tbody>
                        </table>
                    </div>
                    <div id="empty-schedule" class="text-center py-12 text-gray-500">
                        <i class="fas fa-pills text-4xl mb-4 text-gray-300"></i>
                        <p class="text-lg font-medium">No medicines added yet</p>
                        <p class="text-sm">Start by adding your first medication above!</p>
                    </div>
                </section>

                <!-- Medication History Section -->
                <section class="bg-white rounded-xl shadow-lg p-6 mt-6 card-hover no-print" aria-labelledby="history-heading">
                    <h2 id="history-heading" class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                        <i class="fas fa-history mr-2 text-orange-600"></i>Medication History
                    </h2>
                    <div id="medication-history" class="space-y-3">
                        <!-- History items will be inserted here -->
                    </div>
                </section>
            </div>
        </div>
    </div>

    <script type="module" src="../src/main.js"></script>

    <!-- Info Modal -->
    <div id="info-modal" class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full hidden z-50">
        <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
            <div class="mt-3 text-center">
                <h3 class="text-lg leading-6 font-medium text-gray-900">About Medicine Tracker</h3>
                <div class="mt-2 px-7 py-3">
                    <p class="text-sm text-gray-500">
                        This application helps you manage your medication schedule efficiently. You can add, edit, and delete medicine entries, and generate a printable PDF schedule. The autocomplete feature assists in quickly finding medicine names.
                    </p>
                    <p class="text-sm text-gray-500 mt-4">
                        <strong>Developer:</strong> Md. Ismail Hossain<br>
                        <strong>Contact:</strong> ismailhossain013@gmail.com<br>
                        <strong>Phone:</strong> +88-01866304933
                    </p>
                </div>
                <div class="items-center px-4 py-3">
                    <button id="close-modal" class="btn-primary w-full">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settings-modal" class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full hidden z-50">
        <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
            <div class="mt-3">
                <h3 class="text-lg leading-6 font-medium text-gray-900 mb-4">Settings</h3>
                <div class="space-y-4">
                    <div>
                        <label class="flex items-center">
                            <input type="checkbox" id="enable-notifications" class="rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50">
                            <span class="ml-2 text-sm text-gray-700">Enable notifications</span>
                        </label>
                    </div>
                    <div>
                        <label class="flex items-center">
                            <input type="checkbox" id="auto-save" class="rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50" checked>
                            <span class="ml-2 text-sm text-gray-700">Auto-save data</span>
                        </label>
                    </div>
                    <div>
                        <label for="default-reminder" class="block text-sm font-medium text-gray-700">Default reminder time</label>
                        <select id="default-reminder" class="form-input mt-1">
                            <option value="5">5 minutes before</option>
                            <option value="10" selected>10 minutes before</option>
                            <option value="15">15 minutes before</option>
                            <option value="30">30 minutes before</option>
                        </select>
                    </div>
                </div>
                <div class="mt-6 flex space-x-3">
                    <button id="close-settings" class="btn-secondary flex-1">Cancel</button>
                    <button id="save-settings" class="btn-primary flex-1">Save</button>
                </div>
            </div>
        </div>
    </div>
</body>
</html>